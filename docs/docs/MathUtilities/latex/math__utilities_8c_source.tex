\doxysection{math\+\_\+utilities.\+c}
\hypertarget{math__utilities_8c_source}{}\label{math__utilities_8c_source}\index{src/math\_utilities.c@{src/math\_utilities.c}}
\mbox{\hyperlink{math__utilities_8c}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00001}00001\ }
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00005}00005\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{math__utilities_8h}{math\_utilities.h}}"{}}}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00006}00006\ }
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00007}00007\ \textcolor{comment}{//\ Function\ to\ generate\ random\ control\ times\ for\ cubic\ spline\ interpolation}}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00008}\mbox{\hyperlink{group___random_ga598bad1a64246a91b53706c6e7255d3e}{00008}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{group___random_ga598bad1a64246a91b53706c6e7255d3e}{generateRandomControlTimes}}(\textcolor{keywordtype}{double}*\ controlTimes,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ numPoints)\ \{}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00009}00009\ \ \ \ \ \textcolor{comment}{//\ Ensure\ at\ least\ two\ control\ points\ (start\ and\ end)}}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00010}00010\ \ \ \ \ \textcolor{keywordflow}{if}\ (numPoints\ <\ 2)\ \{}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00011}00011\ \ \ \ \ \ \ \ \ fprintf(stderr,\ \textcolor{stringliteral}{"{}Error:\ Insufficient\ number\ of\ control\ points\(\backslash\)n"{}});}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00012}00012\ \ \ \ \ \ \ \ \ exit(EXIT\_FAILURE);}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00013}00013\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00014}00014\ }
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00015}00015\ \ \ \ \ \textcolor{comment}{//\ Set\ the\ first\ and\ last\ control\ points}}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00016}00016\ \ \ \ \ controlTimes[0]\ =\ 0.0;}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00017}00017\ \ \ \ \ controlTimes[numPoints\ -\/\ 1]\ =\ 1.0;\ \ \textcolor{comment}{//\ Assuming\ a\ normalized\ duration\ (0\ to\ 1)}}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00018}00018\ \ \ \ \ \textcolor{keywordtype}{double}\ MAX\_STEP\ =\ 1.0\ /\ numPoints;}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00019}00019\ }
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00020}00020\ \ \ \ \ \textcolor{comment}{//\ Generate\ random\ control\ points\ in\ between}}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00021}00021\ \ \ \ \ printf(\textcolor{stringliteral}{"{}Begin\ Control\ Times-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\(\backslash\)n"{}});}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00022}00022\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 1;\ i\ <\ (numPoints\ -\/\ 1);\ ++i)\ \{}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00023}00023\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Generate\ a\ random\ value\ between\ the\ previous\ and\ next\ control\ points}}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00024}00024\ \ \ \ \ \ \ \ \ controlTimes[i]\ =\ (double)(rand())\ /\ 32767.0\ *\ MAX\_STEP\ +\ controlTimes[i-\/1];}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00025}00025\ \ \ \ \ \ \ \ \ MAX\_STEP\ =\ (1.0\ -\/\ controlTimes[i])\ /\ (\textcolor{keywordtype}{double})(numPoints\ -\/\ i);}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00026}00026\ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}[\%d]:\ \%f\(\backslash\)n"{}},\ i,\ controlTimes[i]);}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00027}00027\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00028}00028\ \ \ \ \ printf(\textcolor{stringliteral}{"{}-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/End\ Control\ Times\(\backslash\)n"{}});}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00029}00029\ \}}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00030}00030\ }
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00031}00031\ \textcolor{comment}{//\ Function\ to\ generate\ random\ control\ points\ for\ cubic\ spline\ interpolation}}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00032}\mbox{\hyperlink{group___random_gae80a71e8fd32314d2fa5d21a8a556b4c}{00032}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{group___random_gae80a71e8fd32314d2fa5d21a8a556b4c}{generateRandomControlPoints}}(\textcolor{keywordtype}{double}*\ controlPoints,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ maxValue,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ numPoints)\ \{}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00033}00033\ \ \ \ \ \textcolor{comment}{//\ Ensure\ at\ least\ two\ control\ points\ (start\ and\ end)}}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00034}00034\ \ \ \ \ \textcolor{keywordflow}{if}\ (numPoints\ <\ 2)\ \{}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00035}00035\ \ \ \ \ \ \ \ \ fprintf(stderr,\ \textcolor{stringliteral}{"{}Error:\ Insufficient\ number\ of\ control\ points\(\backslash\)n"{}});}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00036}00036\ \ \ \ \ \ \ \ \ exit(EXIT\_FAILURE);}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00037}00037\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00038}00038\ }
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00039}00039\ \ \ \ \ \textcolor{comment}{//\ Generate\ random\ control\ points}}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00040}00040\ \ \ \ \ printf(\textcolor{stringliteral}{"{}Begin\ Control\ Points-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\(\backslash\)n"{}});}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00041}00041\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ (numPoints\ -\/\ 1);\ ++i)\ \{}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00042}00042\ \ \ \ \ \ \ \ \ controlPoints[i]\ =\ (double)(rand())\ /\ 32767.0\ *\ maxValue;}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00043}00043\ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}[\%d]:\ \%f\(\backslash\)n"{}},\ i,\ controlPoints[i]);}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00044}00044\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00045}00045\ \ \ \ \ printf(\textcolor{stringliteral}{"{}-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/End\ Control\ Points\(\backslash\)n"{}});}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00046}00046\ \}}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00047}00047\ }
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00048}00048\ \textcolor{comment}{//\ Function\ to\ generate\ a\ random\ integer\ between\ min\ and\ max\ (inclusive)}}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00049}\mbox{\hyperlink{group___random_gad7954e6a1b9ea073c7bc894dc5af85a9}{00049}}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{group___random_gad7954e6a1b9ea073c7bc894dc5af85a9}{random\_int}}(\textcolor{keywordtype}{int}\ min,\ \textcolor{keywordtype}{int}\ max)\ \{}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00050}00050\ \ \ \ \ \textcolor{keywordflow}{return}\ min\ +\ rand()\ \%\ (max\ -\/\ min\ +\ 1);}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00051}00051\ \}}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00052}00052\ }
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00053}00053\ \textcolor{comment}{//\ Function\ for\ cubic\ spline\ interpolation\ using\ de\ Boor's\ algorithm}}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00054}\mbox{\hyperlink{group___interpolation_gababebbe204692721ab2a42ee40841caa}{00054}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{group___interpolation_gababebbe204692721ab2a42ee40841caa}{cubicSpline2DInterpolant}}(\textcolor{keywordtype}{double}\ t,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}*\ controlTimes,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}*\ controlPointsX,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}*\ controlPointsY,\ \textcolor{keywordtype}{size\_t}*\ segment,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ numPoints,\ uint16\_t*\ x,\ uint16\_t*\ y)\ \{}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00055}00055\ \ \ \ \ \textcolor{comment}{//\ Ensure\ at\ least\ two\ control\ points}}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00056}00056\ \ \ \ \ \textcolor{keywordflow}{if}\ (numPoints\ <\ 2)\ \{}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00057}00057\ \ \ \ \ \ \ \ \ fprintf(stderr,\ \textcolor{stringliteral}{"{}Error:\ Insufficient\ number\ of\ control\ points\(\backslash\)n"{}});}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00058}00058\ \ \ \ \ \ \ \ \ exit(EXIT\_FAILURE);}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00059}00059\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00060}00060\ }
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00061}00061\ \ \ \ \ \textcolor{keywordflow}{while}\ ((controlTimes[*segment]\ <\ t)\ \&\&\ (*segment\ <\ numPoints))\ \{}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00062}00062\ \ \ \ \ \ \ \ \ (*segment)++;}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00063}00063\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00064}00064\ }
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00065}00065\ \ \ \ \ \textcolor{comment}{//\ Perform\ cubic\ spline\ interpolation\ using\ de\ Boor's\ algorithm}}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00066}00066\ \ \ \ \ \textcolor{keywordtype}{double}\ h0\ =\ controlTimes[*segment]\ -\/\ controlTimes[*segment\ -\/\ 1];}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00067}00067\ \ \ \ \ \textcolor{keywordtype}{double}\ h1\ =\ controlTimes[*segment\ +\ 1]\ -\/\ controlTimes[*segment];}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00068}00068\ \ \ \ \ \textcolor{keywordtype}{double}\ tNormalized\ =\ (t\ -\/\ controlTimes[*segment\ -\/\ 1])\ /\ h0;\ \ \textcolor{comment}{//\ Corrected\ denominator\ to\ h0}}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00069}00069\ }
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00070}00070\ \ \ \ \ \textcolor{keywordtype}{double}\ alpha\ =\ (1.0\ -\/\ tNormalized)\ *\ h1\ /\ h0;\ \ \textcolor{comment}{//\ Corrected\ denominators\ to\ h1\ and\ h0}}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00071}00071\ \ \ \ \ \textcolor{keywordtype}{double}\ beta\ =\ tNormalized\ *\ h0\ /\ h1;}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00072}00072\ }
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00073}00073\ \ \ \ \ \textcolor{comment}{//\ Calculate\ intermediate\ points\ for\ de\ Boor's\ algorithm}}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00074}00074\ \ \ \ \ \textcolor{keywordtype}{double}\ d0x\ =\ controlPointsX[*segment\ -\/\ 1];}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00075}00075\ \ \ \ \ \textcolor{keywordtype}{double}\ d1x\ =\ controlPointsX[*segment];}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00076}00076\ \ \ \ \ \textcolor{keywordtype}{double}\ d2x\ =\ controlPointsX[*segment\ +\ 1];}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00077}00077\ }
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00078}00078\ \ \ \ \ \textcolor{keywordtype}{double}\ c0x\ =\ d0x\ +\ alpha\ *\ (d1x\ -\/\ d0x);}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00079}00079\ \ \ \ \ \textcolor{keywordtype}{double}\ c1x\ =\ d1x\ +\ beta\ *\ (d2x\ -\/\ d1x);}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00080}00080\ }
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00081}00081\ \ \ \ \ \textcolor{keywordtype}{double}\ resultX\ =\ c0x\ +\ (c1x\ -\/\ c0x)\ *\ tNormalized;}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00082}00082\ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00083}00083\ }
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00084}00084\ \ \ \ \ \textcolor{keywordtype}{double}\ d0y\ =\ controlPointsY[*segment\ -\/\ 1];}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00085}00085\ \ \ \ \ \textcolor{keywordtype}{double}\ d1y\ =\ controlPointsY[*segment];}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00086}00086\ \ \ \ \ \textcolor{keywordtype}{double}\ d2y\ =\ controlPointsY[*segment\ +\ 1];}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00087}00087\ }
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00088}00088\ \ \ \ \ \textcolor{keywordtype}{double}\ c0y\ =\ d0y\ +\ alpha\ *\ (d1y\ -\/\ d0y);}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00089}00089\ \ \ \ \ \textcolor{keywordtype}{double}\ c1y\ =\ d1y\ +\ beta\ *\ (d2y\ -\/\ d1y);}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00090}00090\ }
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00091}00091\ \ \ \ \ \textcolor{keywordtype}{double}\ resultY\ =\ c0y\ +\ (c1y\ -\/\ c0y)\ *\ tNormalized;}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00092}00092\ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00093}00093\ \ \ \ \ \textcolor{comment}{//\ Assign\ the\ casted\ values\ to\ cursorData}}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00094}00094\ \ \ \ \ *x\ =\ (resultX\ >\ 0)\ ?\ (uint16\_t)resultX\ :\ 0;}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00095}00095\ \ \ \ \ *y\ =\ (resultY\ >\ 0)\ ?\ (uint16\_t)resultY\ :\ 0;}
\DoxyCodeLine{\Hypertarget{math__utilities_8c_source_l00096}00096\ \}}

\end{DoxyCode}
